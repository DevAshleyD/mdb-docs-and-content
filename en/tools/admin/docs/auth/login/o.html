<style>
  .skin-light .login-form,
  .skin-light .logout-form {
    max-width: 30rem;
    margin-right: auto;
    margin-left: auto;
  }

  .skin-light .logout-form {
    display: none;
  }
</style>

<!--Section: Intro-->
<section id="introduction">

  <!--Title-->
  <h2 class="primary-heading mt-3">Login Auth</h2>

  <!-- Subtitle -->
  <h1 class="secondary-heading mb-4">Admin Login Auth</h1>

  <!--Description-->
  <p>Login simulation with localStorage data.</p>

</section>
<!--/Section: Intro-->

<hr class="my-5">

<!--Section: Basic example-->
<section id="basic-example">

  <!--Title-->
  <h2 class="section-heading mb-4">
    Basic example
  </h2>

  <!--Section: Live preview-->
  <section>

    <div class="container">

      <!--Grid row-->
      <div class="row">

        <!--Grid column-->
        <div class="col-md-6">

          <!--Section: Login Form-->
          <section class="mb-5 login-form">

            <form class="needs-validation" novalidate autocomplete="off">

              <div class="md-form md-outline">
                <input type="email" name="login-email" id="login-email" class="form-control">
                <label data-error="wrong" data-success="right" for="login-email">Your email</label>
              </div>
              <div class="md-form md-outline">
                <input type="password" name="login-password" id="login-password" class="form-control">
                <label data-error="wrong" data-success="right" for="login-password">Your password</label>
              </div>

              <div class="d-flex justify-content-between align-items-center mb-2">

                <div class="form-check pl-0 mb-3">
                  <input type="checkbox" class="form-check-input filled-in" id="new">
                  <label class="form-check-label small text-uppercase card-link-secondary" for="new">Remember me</label>
                </div>

                <p><a href="https://mdbootstrap.com/docs/jquery/admin/auth/reset-password/">Forgot password?</a></p>

              </div>

              <div class="text-center pb-2">

                <button type="submit" class="btn btn-primary mb-4">Sign in</button>

                <p>Not a member? <a href="https://mdbootstrap.com/docs/jquery/admin/auth/register/">Register</a></p>

                <p>or sign in with:</p>

                <a type="button" class="btn-floating btn-fb btn-sm mr-1">
                  <i class="fab fa-facebook-f"></i>
                </a>
                <a type="button" class="btn-floating btn-tw btn-sm mr-1">
                  <i class="fab fa-twitter"></i>
                </a>
                <a type="button" class="btn-floating btn-li btn-sm mr-1">
                  <i class="fab fa-linkedin-in"></i>
                </a>
                <a type="button" class="btn-floating btn-git btn-sm">
                  <i class="fab fa-github"></i>
                </a>

              </div>

            </form>

          </section>
          <!--Section: Login Form-->

          <!--Section: Logout Form-->
          <section class="logout-form py-5">
            <p class="logged-user-message pb-2"></p>
            <button class="btn btn-danger waves-effect logout">Log out</button>
          </section>
          <!--Section: Logout Form-->

        </div>
        <!--Grid column-->

      </div>
      <!--Grid row-->
    
    </div>

    <!-- Modal -->
    <div class="modal fade" id="error-modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Login error</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body"></div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>
    <!-- Modal -->

  </section>
  <!--Section: Live preview-->

  <!--Section: Code-->
  <section>
    <mdbsnippet>

      <code data-lang="html" data-name="HTML">

        <!--Section: Login Form-->
        <section class="mb-5 login-form">

          <form class="needs-validation" novalidate autocomplete="off">

            <div class="md-form md-outline">
              <input type="email" name="login-email" id="login-email" class="form-control">
              <label data-error="wrong" data-success="right" for="login-email">Your email</label>
            </div>
            <div class="md-form md-outline">
              <input type="password" name="login-password" id="login-password" class="form-control">
              <label data-error="wrong" data-success="right" for="login-password">Your password</label>
            </div>

            <div class="d-flex justify-content-between align-items-center mb-2">

              <div class="form-check pl-0 mb-3">
                <input type="checkbox" class="form-check-input filled-in" id="new">
                <label class="form-check-label small text-uppercase card-link-secondary" for="new">Remember me</label>
              </div>

              <p><a href="https://mdbootstrap.com/docs/jquery/admin/auth/reset-password/">Forgot password?</a></p>

            </div>

            <div class="text-center pb-2">

              <button type="submit" class="btn btn-primary mb-4">Sign in</button>

              <p>Not a member? <a href="https://mdbootstrap.com/docs/jquery/admin/auth/register/">Register</a></p>

              <p>or sign in with:</p>

              <a type="button" class="btn-floating btn-fb btn-sm mr-1">
                <i class="fab fa-facebook-f"></i>
              </a>
              <a type="button" class="btn-floating btn-tw btn-sm mr-1">
                <i class="fab fa-twitter"></i>
              </a>
              <a type="button" class="btn-floating btn-li btn-sm mr-1">
                <i class="fab fa-linkedin-in"></i>
              </a>
              <a type="button" class="btn-floating btn-git btn-sm">
                <i class="fab fa-github"></i>
              </a>

            </div>

          </form>

        </section>
        <!--Section: Login Form-->

        <!--Section: Logout Form-->
        <section class="logout-form py-5">
          <p class="logged-user-message pb-2"></p>
          <button class="btn btn-danger waves-effect logout">Log out</button>
        </section>
        <!--Section: Logout Form-->
    
        <!-- Modal -->
        <div class="modal fade" id="error-modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Login error</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body"></div>
              <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
              </div>
            </div>
          </div>
        </div>
        <!-- Modal -->

      </code>

      <code data-lang="javascript" data-name="JS">
        $(document).ready(function() {

          $('.login-form form').on('submit', function(event) {
            event.preventDefault();
      
            if (document.querySelector('.login-form form').checkValidity()) {
              const loginData = $(this).serializeArray();
              if (loginData[0].value === localStorage.mdbAdminUserEmail && loginData[1].value === localStorage.mdbAdminUserPass) {
                localStorage.setItem("mdbAdminUserLogged", true);
                location.reload();
              } else {
                $('#error-modal .modal-body').html('Your email or password is incorrect.');
                $('#error-modal').modal('toggle');
              }
            } else {
              $('#error-modal .modal-body').html('Please provide correct login data.');
              $('#error-modal').modal('toggle');
            }
      
          })
      
          $('.logout').on('click', () => {
            localStorage.setItem("mdbAdminUserLogged", false);
            location.reload();
          })
      
          if (localStorage.mdbAdminUserLogged === "true") {
            $('.login-form').hide();
            $('.logout-form').show();
            $('.logged-user-message').html(`You are logged in as <strong>${localStorage.mdbAdminUserFirstName} ${localStorage.mdbAdminUserLastName}</strong>!`);
          }
      
        })  
      </code>

      <code data-lang="css" data-name="CSS">
        .skin-light .login-form,
        .skin-light .logout-form {
          max-width: 30rem;
          margin-right: auto;
          margin-left: auto;
        }
    
        .skin-light .logout-form {
          display: none;
        }
      </code>
    </mdbsnippet>
  </section>
  <!--Section: Code-->

</section>
<!--/Section: Basic example-->

<hr class="my-5">

<!-- Section: Form submitting -->
<section id="form-submitting">

  <!--Title-->
  <h2 class="section-heading mb-4">
    1. Form submitting
  </h2>

  <p>After submitting the form, we should check its details. In the presented example, we get email and password from localStorage and compare them with the data from the form. If the values are the same, we add new item to the localStorage and reload page. Otherwise, we display a modal with a login error description.</p>

  <p class="note note-danger">In the production application, user data from the form should be compared with data from the database, not localStorage. In addition, user password should be encrypted.</p>

  <!--Section: Code-->
  <section>
    <mdbsnippet>
      <code data-lang="javascript" data-name="JS">
        $(document).ready(function() {

          // Form submit function
          $('.login-form form').on('submit', function(event) {
            // Prevent default usage
            event.preventDefault();
      
            if (document.querySelector('.login-form form').checkValidity()) {
              // Getting data from the form
              const loginData = $(this).serializeArray();

              // Comparing user data from login form and localStorage
              if (loginData[0].value === localStorage.mdbAdminUserEmail && loginData[1].value === localStorage.mdbAdminUserPass) {

                // Setting Log In state if data correct
                localStorage.setItem("mdbAdminUserLogged", true);
                location.reload();
              } else {

                // Login error message
                $('#error-modal .modal-body').html('Your email or password is incorrect.');
                $('#error-modal').modal('toggle');
              }
            } else {
              
              // Login error message
              $('#error-modal .modal-body').html('Please provide correct login data.');
              $('#error-modal').modal('toggle');
            }
      
          })
        })
      </code>
    </mdbsnippet>
  </section>
  <!--Section: Code-->

</section>
<!--Section: Form submitting  -->

<hr class="my-5">

<!-- Section: Checking user data -->
<section id="checking-user-data">

  <!--Title-->
  <h2 class="section-heading mb-4">
    2. Checking user data
  </h2>

  <p>Each time the website is started, the system checks whether the user is logged in or not. If so, it hides the login form and displays user's data with the log out button.</p>

  <!--Section: Code-->
  <section>
    <mdbsnippet>
      <code data-lang="javascript" data-name="JS">

        $(document).ready(function() {

          // checking if item mdbAdminUserLogged exists in localStorage
          if (localStorage.mdbAdminUserLogged === "true") {
            $('.login-form').hide();
            $('.logout-form').show();
            $('.logged-user-message').html(`You are logged in as <strong>${localStorage.mdbAdminUserFirstName} ${localStorage.mdbAdminUserLastName}</strong>!`);
          }
        });

      </code>
    </mdbsnippet>
  </section>
  <!--Section: Code-->

</section>
<!--Section: Checking user data -->

<hr class="my-5">

<!-- Section: Logging Out -->
<section id="logging-out">

  <!--Title-->
  <h2 class="section-heading mb-4">
    3. Logging Out
  </h2>

  <p>Each time the website is loaded, the system checks whether the user is logged in or not. If so, it hides the login form and displays user's data with the log out button.</p>

  <!--Section: Code-->
  <section>
    <mdbsnippet>
      <code data-lang="javascript" data-name="JS">

        $(document).ready(function() {
          // Triggering an event
          $('.logout').on('click', () => {

            // Setting mdbAdminUserLogged to false
            localStorage.setItem("mdbAdminUserLogged", false);

            // Reloading page
            location.reload();
          })
        });

      </code>
    </mdbsnippet>
  </section>
  <!--Section: Code-->

</section>
<!--Section: Logging Out -->

<hr class="my-5">

<!-- Section: Modal -->
<section id="modal">

  <!--Title-->
  <h2 class="section-heading mb-4">
    4. Login error modal
  </h2>

  <p>To display <strong>error message</strong> we used a basic modal toggled by the jQuery method.</p>

  <!--Section: Code-->
  <section>
    <mdbsnippet>
      <code data-lang="html" data-name="HTML">

        <!-- Login error modal -->
        <div class="modal fade" id="error-modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Login error</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body"></div>
              <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
              </div>
            </div>
          </div>
        </div>
        <!-- Login error modal -->

      </code>
      
      <code data-lang="javascript" data-name="JS">

        $(document).ready(function() {
          // Login error message
          $('#error-modal .modal-body').html('Your email or password is incorrect.');
          $('#error-modal').modal('toggle');
        })

      </code>
    </mdbsnippet>
  </section>
  <!--Section: Code-->

</section>
<!--Section: Modal  -->
